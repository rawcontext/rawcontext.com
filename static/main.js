function Q(){if(document.fonts)document.fonts.ready.then(()=>{document.documentElement.classList.add("fonts-loaded")}).catch(()=>{document.documentElement.classList.add("fonts-failed")}),setTimeout(()=>{if(!document.documentElement.classList.contains("fonts-loaded"))document.documentElement.classList.add("fonts-failed")},3000);else document.documentElement.classList.add("fonts-loaded")}function R(){let q=document.querySelector(".constellation-grid");if(!q)return;let B=20;for(let f=0;f<B;f++){let j=document.createElement("div");j.className="constellation-node",j.style.left=Math.random()*100+"%",j.style.top=Math.random()*100+"%",j.style.animationDelay=`${Math.random()*2}s, ${Math.random()*4}s`,q.appendChild(j)}}function U(){let B=new IntersectionObserver((f)=>{f.forEach((j)=>{if(j.isIntersecting)j.target.classList.add("in-view")})},{threshold:0.1,rootMargin:"0px 0px -10% 0px"});document.querySelectorAll(".service-card").forEach((f)=>{B.observe(f),f.addEventListener("mousemove",(j)=>{let D=f.getBoundingClientRect(),J=(j.clientX-D.left)/D.width*100,E=(j.clientY-D.top)/D.height*100;f.style.setProperty("--mouse-x",`${J}%`),f.style.setProperty("--mouse-y",`${E}%`)})})}function Z(){let q=document.getElementById("waitlist-form");if(!q)return;let B=q.querySelector("button"),f=q.querySelector(".waitlist-message"),j=q.querySelector('input[name="email"]'),D=document.createElement("div");D.id="turnstile-container",q.appendChild(D);let J=null,E=!1,K=()=>{if(typeof turnstile>"u"){setTimeout(K,100);return}J=turnstile.render("#turnstile-container",{sitekey:"0x4AAAAAACJhYfFcaH1IGN1W",execution:"execute",appearance:"interaction-only",callback:(H)=>{if(E)E=!1,M(H)},"error-callback":()=>{E=!1,B.classList.remove("loading"),B.disabled=!1,f.className="waitlist-message error",f.textContent="Verification failed. Try again."}})};K();let M=async(H)=>{let O=j.value;try{let N=await fetch("/api/waitlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:O,turnstileToken:H})}),P=await N.json();if(N.ok)f.className="waitlist-message success",f.textContent="You're on the list. We'll be in touch.",j.value="";else f.className="waitlist-message error",f.textContent=P.error||"Something went wrong. Try again."}catch{f.className="waitlist-message error",f.textContent="Connection failed. Try again."}finally{if(B.classList.remove("loading"),B.disabled=!1,typeof turnstile<"u")turnstile.reset(J??void 0)}};q.addEventListener("submit",(H)=>{if(H.preventDefault(),typeof turnstile>"u"){f.className="waitlist-message error",f.textContent="Please wait for page to load.";return}B.classList.add("loading"),B.disabled=!0,f.className="waitlist-message",f.textContent="",E=!0,turnstile.execute("#turnstile-container")})}function _(){let q=document.getElementById("solar-system");if(!q)return;let B=q.parentElement;if(!B)return;B.addEventListener("mousemove",(f)=>{let j=B.getBoundingClientRect(),D=j.left+j.width/2,J=j.top+j.height/2,E=(f.clientX-D)/j.width,M=(f.clientY-J)/j.height*15,H=E*-15;q.style.transform=`translate(-50%, -50%) rotateX(${M}deg) rotateY(${H}deg)`}),B.addEventListener("mouseleave",()=>{q.style.transform="translate(-50%, -50%) rotateX(0deg) rotateY(0deg)"})}Q();document.addEventListener("DOMContentLoaded",()=>{R(),U(),Z(),_()});
